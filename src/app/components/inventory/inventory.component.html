<div class="container mt-5">
  <h2>Vaccine Inventory</h2>

  <!-- Add Vaccine Stock Form -->
  <div class="card mt-4">
    <div class="card-header">Add Vaccine Stock</div>
    <!-- Update Vaccine Stock Modal -->
    <ng-template #updateStockModal let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Update Vaccine Stock</h4>
        <button
          type="button"
          class="close"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #updateForm="ngForm" (ngSubmit)="modal.close('Save')">
          <div class="mb-3">
            <label for="updatedVaccineName" class="form-label"
              >Vaccine Name</label
            >
            <input
              type="text"
              class="form-control"
              id="updatedVaccineName"
              name="vaccineName"
              [(ngModel)]="selectedStock.VaccineName"
            />
          </div>
          <div class="mb-3">
            <label for="updatedManufacturer" class="form-label"
              >Manufacturer</label
            >
            <input
              type="text"
              class="form-control"
              id="updatedManufacturer"
              name="manufacturer"
              [(ngModel)]="selectedStock.Manufacturer"
            />
          </div>
          <div class="mb-3">
            <label for="updatedExpiryDate" class="form-label"
              >Expiry Date</label
            >
            <input
              type="date"
              class="form-control"
              id="updatedExpiryDate"
              name="expiryDate"
              [(ngModel)]="selectedStock.ExpiryDate"
            />
          </div>
          <div class="mb-3">
            <label for="updatedStock" class="form-label">Stock</label>
            <input
              type="number"
              class="form-control"
              id="updatedStock"
              name="stock"
              [(ngModel)]="selectedStock.Stock"
            />
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <button
              type="button"
              class="btn btn-secondary"
              (click)="modal.dismiss('Cancel click')"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </ng-template>
    <div class="card-body">
      <form
        (ngSubmit)="addVaccineStock(newStockForm.value)"
        #newStockForm="ngForm"
      >
        <!-- Vaccine Name -->
        <div class="mb-3">
          <label for="vaccineName" class="form-label">Vaccine Name</label>
          <input
            type="text"
            class="form-control"
            id="vaccineName"
            name="vaccineName"
            ngModel
            required
          />
        </div>

        <!-- Manufacturer -->
        <div class="mb-3">
          <label for="manufacturer" class="form-label">Manufacturer</label>
          <input
            type="text"
            class="form-control"
            id="manufacturer"
            name="manufacturer"
            ngModel
            required
          />
        </div>

        <!-- Expiry Date -->
        <div class="mb-3">
          <label for="expiryDate" class="form-label">Expiry Date</label>
          <input
            type="date"
            class="form-control"
            id="expiryDate"
            name="expiryDate"
            ngModel
            required
          />
        </div>

        <!-- Stock -->
        <div class="mb-3">
          <label for="stock" class="form-label">Stock</label>
          <input
            type="number"
            class="form-control"
            id="stock"
            name="stock"
            ngModel
            required
          />
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">Add Stock</button>
      </form>
    </div>
  </div>

  <!-- Vaccine Stock List -->
  <div class="mt-4">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Vaccine Name</th>
          <th>Manufacturer</th>
          <th>Expiry Date</th>
          <th>Stock</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let stock of vaccineStocks">
          <td>{{ stock.Id }}</td>
          <td>{{ stock.VaccineName }}</td>
          <td>{{ stock.Manufacturer }}</td>
          <td>{{ stock.ExpiryDate | date : "yyyy-MM-dd" }}</td>
          <td>{{ stock.Stock }}</td>
          <td>
            <!-- Delete Button -->
            <button
              class="btn btn-danger btn-sm"
              (click)="deleteVaccineStock(stock.Id)"
            >
              Delete
            </button>
            <!-- Update Button - This can trigger a modal or another form for updating the stock -->
            <button
              class="btn btn-warning btn-sm"
              (click)="openUpdateForm(stock, updateStockModal)"
            >
              Update
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
